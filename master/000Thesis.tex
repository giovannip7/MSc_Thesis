% A LaTeX template for MSc Thesis submissions to 
% Politecnico di Milano (PoliMi) - School of Industrial and Information Engineering
%
% S. Bonetti, A. Gruttadauria, G. Mescolini, A. Zingaro
% e-mail: template-tesi-ingind@polimi.it
%
% Last Revision: October 2021
%
% Copyright 2021 Politecnico di Milano, Italy. NC-BY

\documentclass{Configuration_Files/PoliMi3i_thesis}

%------------------------------------------------------------------------------
%	REQUIRED PACKAGES AND  CONFIGURATIONS
%------------------------------------------------------------------------------

% CONFIGURATIONS
\usepackage{parskip} % For paragraph layout
\usepackage{setspace} % For using single or double spacing
\usepackage{emptypage} % To insert empty pages
\usepackage{multicol} % To write in multiple columns (executive summary)
\usepackage{booktabs}
\usepackage{rotating}
\usepackage{multirow}
\usepackage{outlines}
\usepackage{lscape}
\usepackage{minted}
\usepackage{textgreek}
\setlength\columnsep{15pt} % Column separation in executive summary
\setlength\parindent{0pt} % Indentation
\raggedbottom  
\usepackage[pygopt={texcomments=true,style=emacs}]{pythontex}
\setpythontexlistingenv{listing}

\newcounter{sublisting}[listing]
\newcommand{\codeline}[1]{%
  \addcontentsline{lopytx}{listing}%
    {\protect\numberline{\hspace{0.5in}\thelisting.\arabic{FancyVerbLine}}\hspace{0.5in}#1}%
}

% PACKAGES FOR TITLES
\usepackage{titlesec}
% \titlespacing{\section}{left spacing}{before spacing}{after spacing}
\titlespacing{\section}{0pt}{3.3ex}{2ex}
\titlespacing{\subsection}{0pt}{3.3ex}{1.65ex}
\titlespacing{\subsubsection}{0pt}{3.3ex}{1ex}
\usepackage{color}

% PACKAGES FOR LANGUAGE AND FONT
\usepackage[english]{babel} % The document is in English  
\usepackage[utf8]{inputenc} % UTF8 encoding
\usepackage[T1]{fontenc} % Font encoding
\usepackage[11pt]{moresize} % Big fonts

% PACKAGES FOR IMAGES
\usepackage{graphicx}
\usepackage{transparent} % Enables transparent images
\usepackage{eso-pic} % For the background picture on the title page
\usepackage{subfig} % Numbered and caption subfigures using \subfloat.
\usepackage{tikz} % A package for high-quality hand-made figures.
\usetikzlibrary{}
\graphicspath{{./Images/}} % Directory of the images
\usepackage{caption} % Coloured captions
\usepackage{xcolor} % Coloured captions
\usepackage{amsthm,thmtools,xcolor} % Coloured "Theorem"
\usepackage{float}

% STANDARD MATH PACKAGES
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{bm}
\usepackage[overload]{empheq} % For braced-style systems of equations.
\usepackage{fix-cm} % To override original LaTeX restrictions on sizes

% PACKAGES FOR TABLES
\usepackage{tabularx}
\usepackage{longtable} % Tables that can span several pages
\usepackage{colortbl}
\usepackage{hhline}
\usepackage{pgfplots}
% PACKAGES FOR ALGORITHMS (PSEUDO-CODE)
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{listings}

% PACKAGES FOR REFERENCES & BIBLIOGRAPHY
\usepackage[colorlinks=true,linkcolor=black,anchorcolor=black,citecolor=black,filecolor=black,menucolor=black,runcolor=black,urlcolor=black]{hyperref} % Adds clickable links at references
\usepackage{cleveref}
\usepackage{hyperref}
\usepackage[square, numbers, sort&compress]{natbib} % Square brackets, citing references with numbers, citations sorted by appearance in the text and compressed
\bibliographystyle{abbrvnat} % You may use a different style adapted to your field

% OTHER PACKAGES
\usepackage{pdfpages} % To include a pdf file
\usepackage{afterpage}
\usepackage{lipsum} % DUMMY PACKAGE
\usepackage{fancyhdr} % For the headers
\fancyhf{}
\PassOptionsToPackage

% Input of configuration file. Do not change config.tex file unless you really know what you are doing. 
\input{Configuration_Files/config}

%----------------------------------------------------------------------------
%	NEW COMMANDS DEFINED
%----------------------------------------------------------------------------

% EXAMPLES OF NEW COMMANDS
\newcommand{\bea}{\begin{eqnarray}} % Shortcut for equation arrays
\newcommand{\eea}{\end{eqnarray}}
\newcommand{\e}[1]{\times 10^{#1}}  % Powers of 10 notation

%----------------------------------------------------------------------------
%	ADD YOUR PACKAGES (be careful of package interaction)
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
%	ADD YOUR DEFINITIONS AND COMMANDS (be careful of existing commands)
%----------------------------------------------------------------------------

%----------------------------------------------------------------------------
%	BEGIN OF YOUR DOCUMENT
%----------------------------------------------------------------------------

\begin{document}

\fancypagestyle{plain}{%
\fancyhf{} % Clear all header and footer fields
\fancyhead[RO,RE]{\thepage} %RO=right odd, RE=right even
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}

%----------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------

\pagestyle{empty} % No page numbers
\frontmatter % Use roman page numbering style (i, ii, iii, iv...) for the preamble pages

\puttitle{
	title=Simulation and Testing of Navigation for an Autonomous Mobile Robot, % Title of the thesis
	name=Giovanni Porcellato, % Author Name and Surname
	course=Automation and Control Engineering - Ingegneria dell'Automazione, % Study Programme (in Italian)
	ID  = 10745779,  % Student ID number (numero di matricola)
	advisor= Prof. Matteo Matteucci, % Supervisor name
		coadvisor={Simone Mentasti},
	academicyear={2021-22},  % Academic Year
} % These info will be put into your Title page 

%----------------------------------------------------------------------------
%	PREAMBLE PAGES: ABSTRACT (inglese e italiano), EXECUTIVE SUMMARY
%----------------------------------------------------------------------------
\startpreamble
\setcounter{page}{1} % Set page counter to 1

% ABSTRACT IN ENGLISH
\chapter*{Abstract} 
This thesis presents an integrated module for the simulation of a robot in a virtual environment, the creation of a testing platform and an attempt to solve the problems encountered during testing. 
The proposed approach thus offers both a solution to the complications encountered when testing hardware and a tool for collecting data and creating statistics in an automated manner.

The creation of the simulator benefits the development team, since they can take advantage of a system in which they can comfortably test new algorithms, without the risk of damaging the robot or its environment.

The creation of the testing platform serves the purpose of having solid data on which future performance improvements can be analytically evaluated.

Finally, the development of the image filter, responds to the need to solve problems related to certain light conditions that prevented the navigation stack from functioning correctly and consequently caused a degradation in performance.

\textbf{Keywords:} robotics, simulation, navigation, computer vision, image filter, testing platform % Keywords

% ABSTRACT IN ITALIAN
\chapter*{Abstract in lingua italiana}
Questa tesi presenta un modulo integrato per la simulazione di un robot in ambiente virtuale, la creazione di una piattaforma testing e un tentativo di soluzione ai problemi riscontrati in fase di testing. 
L'approccio proposto offre quindi al contempo una soluzione alle complicanze che si incontrano quando si ha a che fa testing su hardware e uno strumento per raccogliere dati e creare statistiche in modo automatizzato.

La creazione del simulatore beneficia il team di sviluppo, dal momento che pu√≤ sfruttare  un sistema in cui testare comodamente i nuovi algoritmi, senza rischio di danneggiare il robot o l'ambiente circostante.

La creazione della piattaforma di testing risponde allo scopo di avere dei dati solidi su cui poter valutare i futuri miglioramenti delle performance in modo analitico.

Infine, lo sviluppo del filtro d'immagine, risponde all'esigenza di risolvere delle problematiche relative a certe condizioni di luce che impedivano il corretto funzionamento dello stack di navigazione e di conseguenza che causavano un degradamento delle performance.

\textbf{Parole chiave:} robotica mobile, simulatore, navigazione, visione computazionale, test

%----------------------------------------------------------------------------
%	LIST OF CONTENTS/FIGURES/TABLES/SYMBOLS
%----------------------------------------------------------------------------

% TABLE OF CONTENTS
\thispagestyle{empty}
\tableofcontents % Table of contents 
\thispagestyle{empty}
\cleardoublepage

%-------------------------------------------------------------------------
%	THESIS MAIN TEXT
%-------------------------------------------------------------------------
% In the main text of your thesis you can write the chapters in two different ways:
%
%(1) As presented in this template you can write:
%    \chapter{Title of the chapter}
%    *body of the chapter*
%
%(2) You can write your chapter in a separated .tex file and then include it in the main file with the following command:
%    \chapter{Title of the chapter}
%    \input{chapter_file.tex}
%
% Especially for long thesis, we recommend you the second option.

\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
\mainmatter % Begin numeric (1,2,3...) page numbering

% --------------------------------------------------------------------------
% NUMBERED CHAPTERS % Regular chapters following
% --------------------------------------------------------------------------
\chapter{Introduction}
\label{intro}
\input{01Chapter1}

\chapter*{Theoretical background}
From now on some basic knowledge needed to comprehend the reasoning of this work's study object is described and explained. 
This section consists of:
\begin{itemize}
    \item \textbf{Chapter \ref{ch:ros}:} \nameref{ch:ros}
    \item \textbf{Chapter \ref{ch:robot}:} \nameref{ch:robot}
    \item \textbf{Chapter \ref{ch:nav_stack}:} \nameref{ch:nav_stack}
\end{itemize}

\chapter{ROS}
\label{ch:ros}
\input{02Chapter2}

\chapter{Robot}
\label{ch:robot}
\input{03Chapter3}

\chapter{Navigation Stack}
\label{ch:nav_stack}
\input{04Chapter4}

\chapter*{Contribution}
\begin{itemize}
    \item \textbf{Chapter \ref{ch:sim_test}: \nameref{ch:sim_test}}
    \item \textbf{Chapter \ref{ch:pcl}: \nameref{ch:pcl}}
\end{itemize}

\chapter{Simulator and Testing Platform}
\label{ch:sim_test}
\input{05Chapter5}

\chapter{Pointcloud Filter}
\label{ch:pcl}
\input{06Chapter6}


\chapter{Conclusions and future developments}
\label{ch:conclusions}%
In the first part of this work, a simulator was developed from scratch to test new navigation algorithms. This made it possible to test the new custom recovery behaviour, for example, first in the simulated environment and once the goodness of the development was seen, it was implemented in the real robot. Consequently, a testing platform was developed that provides a comprehensive overview of performance measurements, motor current data and a robot trajectory visualiser. During testing, a problem was observed with the depth camera, which recognised reflections on the floor as obstacles. A real time filter was then implemented to decrease the density of the pointcloud data. Thanks to this, it was possible to solve the problem of phantom obstacles by decreasing the stuck time, in a computational time that does not affect the result. 
The simulator could be subject to further improvements in the future: one possible route that could be taken would be to break free from gazebo plug-ins, for example by modelling the differential drive on a par with that used in the real robot. Furthermore, in order to make the simulated model completely mirror the real one, another possibility that could be pursued would certainly be to analytically model friction and wheel slip. As far as the pointcloud filter is concerned, other possible solutions can be tested: there are several filters for manipulating the point cloud, the results of which have yet to be tested.

%-------------------------------------------------------------------------
%	BIBLIOGRAPHY
%-------------------------------------------------------------------------

\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
\bibliography{Thesis_bibliography} % The references information are stored in the file named "Thesis_bibliography.bib"

%-------------------------------------------------------------------------
%	APPENDICES
%-------------------------------------------------------------------------

\cleardoublepage
\addtocontents{toc}{\vspace{2em}} % Add a gap in the Contents, for aesthetics
\appendix
\chapter{Appendix A}
\label{ch:appA}
\input{AppendixA}

\chapter{Appendix B}
\label{ch:appB}
\input{AppendixB}

% LIST OF FIGURES
\listoffigures

% LIST OF TABLES
\listoftables

% LIST OF SYMBOLS
% Write out the List of Symbols in this page
\chapter*{List of Symbols} % You have to include a chapter for your list of symbols (
\begin{table}[H]
    \centering
    \begin{tabular}{lll}
        \textbf{Variable} & \textbf{Description} & \textbf{SI unit} \\\hline\\[-9px]
        $\omega$ & angular speed & rad/s \\[2px]
        $V$ & linear speed & m/s \\[2px]
    \end{tabular}
\end{table}

% ACKNOWLEDGEMENTS
\chapter*{Acknowledgements}
Lo sviluppo di questa tesi si pone come un traguardo per me, alla fine di un percorso
iniziato ormai tre anni fa quando decisi d'intraprendere il passaggio da economia a ingegneria.


Desidero quindi ringraziare prima di tutto la mia famiglia, che da sempre mi supporta,
credendo tanto quanto me in questo progetto. Senza il loro appoggio non sarei arrivato
fino a qui. Una dedica in particolare va a mio nonno, per essere stato per me un esempio
di dedizione al lavoro e forza di determinazione.

Ringrazio le persone che mi hanno accompagnato in questi anni e che tutt‚Äôora
mi sono vicine ogni giorno, con le quali ho condiviso momenti importanti che spero di ricordare a lungo.

Grazie ad Oversonic Robotics, a Fabio Puglia per avermi dato l‚Äôopportunit√† di lavorare
a un progetto cos√¨ ambizioso, all‚Äôing. Lorenzo Romanini per il supporto e a tutte le
persone incontrate a Besana che hanno alleggerito le giornate di lavoro.


Vorrei esprimere inoltre la mia gratitudine al professor Matteo Matteucci, per la sua
pazienza e la sua disponibilit√† nell‚Äôaffiancarmi in questa tesi.

Ringrazio il Politecnico di Milano e il professor Paolo Bolzern per avermi dato la possibilit√† d'intraprendere questo percorso, anche quando il
mio background non lo consentiva.
Ringrazio infine la citt√† di Milano per avermi accolto e fatto crescere dal punto di vista
umano e professionale in questi anni.



\cleardoublepage

\end{document}
